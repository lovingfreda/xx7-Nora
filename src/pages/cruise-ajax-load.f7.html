<template>
  <div class="page">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="left">
          <a href="#" class="back link">
            <i class="icon icon-back"></i>
            <span class="if-not-md">Back</span>
          </a>
        </div>
        <div class="title">${user.firstName} ${user.lastName}</div>
      </div>
    </div>
    <div class="page-content">
      <div class="block block-strong">
        ${user.about}
      </div>


      <div class="list links-list">
        <ul>
          ${user.links.map((link) => $h`
            <li><a class="external" target="_blank" href="${link.url}">${link.title}</a></li>
          `)}
        </ul>
      </div>
<!-- 
      <div class="list links-list">
        <ul>
          {{#each products}}
            <li><a href="/product/{{id}}/">{{name}}--({{description}})</a></li>
          {{/each}}
        </ul>
      </div>
 -->
      <div class="list links-list">
        <ul>
          ${products.map((link) => $h`
            <li><a class="external" target="_blank" href="${link.id}">${link.name}</a></li>
          `)}
        </ul>
      </div>

      <div class="list links-list">
        <ul>
          <li>
            <a href="#" class="popup-open" data-popup="#my-popup">Dynamic (Component) Route</a>
          </li>
        </ul>
      </div>

    </div>

    <!-- Popup -->
    <div class="popup" id="my-popup">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Popup</div>
              <div class="right">
                <a href="#" class="link popup-close">Close</a>
              </div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              <p>Popup content goes here.</p>
            </div>
          </div>
        </div>
      </div>
    </div>


  </div>
</template>
<script>
  export default (props) => {
    const user = props.catg;

// Important !!! a> we set this var in Route   b> MUST using JSON.parse()
        // New veresion using 'success'=1 and 'products'=xxxxxxx, so we using new statement
//      products: JSON.parse(this.$route.context.products),                 // Important !!! ********************************
//      products: JSON.parse(this.$route.context.products)['products'],     // Important !!! ********************************
    var products = JSON.parse(props.prdt)['products'];
    
    console.log("Access data succeed!" + products[0]["name"]);  // Debug..

    return $render;
  }
</script>
