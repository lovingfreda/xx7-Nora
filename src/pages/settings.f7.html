<template>
<div class="page" data-name="settings">
  <div class="navbar">
    <div class="navbar-bg"></div>
    <div class="navbar-inner sliding">
      <div class="title">Settings</div>
    </div>
  </div>
  <div class="page-content">
    <div class="block-title">个人资料</div>

<form action="http://localhost:8086/api/EditUser.php?user_id=3" method="POST" class="list form-ajax-submit" id="my-form">
<!-- Laravel 的请求处理系统要求所有非 GET 和 POST 的请求全部通过 POST 请求来执行，再将真正的方法使用 _method 表单字段携带给后端。 -->

    ${users.value.length > 0 ? $h`
    <div class="list no-hairlines-md">
      ${users.value.map((user) => $h`
      <ul>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">姓名</div>
              <div class="item-input-wrap">
                <input type="text" name="first_name" placeholder="Your name"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">昵称</div>
              <div class="item-input-wrap">
                <input type="text" name="title" placeholder="Your title"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">电子邮箱</div>
              <div class="item-input-wrap">
                <input type="email" name="email" placeholder="E-mail"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">手机号</div>
              <div class="item-input-wrap">
                <input type="tel" name="mobile" placeholder="Phone"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">性别</div>
              <div class="item-input-wrap">
                <select name="gender">
                  <option value="1">Male</option>
                  <option value="2">Female</option>
                </select>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">年龄</div>
              <div class="item-input-wrap">
                <select name="age">
                  <option value="1">less than 13岁</option>
                  <option value="2">13-17岁</option>
                  <option value="3">18-24岁</option>
                  <option value="4">25-34岁</option>
                  <option value="5">35-50岁</option>
                  <option value="6">51-65岁</option>
                  <option value="7">over 65岁</option>
                </select>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">语言</div>
              <div class="item-input-wrap">
                <select name="language">
                  <option value="1">English</option>
                  <option value="2">French</option>
                  <option value="3">German</option>
                  <option value="4">Chinese</option>
                  <option value="5">Japanese</option>
                  <option value="6">Russian</option>
                  <option value="7">Polish</option>
                  <option value="8">Turkish</option>
                  <option value="9">Yiddish</option>
                </select>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">所在城市</div>
              <div class="item-input-wrap">
                <input type="tel" name="city" placeholder="City"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">地址处所</div>
              <div class="item-input-wrap">
                <input type="tel" name="address1" placeholder="Address Line 1"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label"></div>
              <div class="item-input-wrap">
                <input type="tel" name="address2" placeholder="Address Line 2"/>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label"></div>
              <div class="item-input-wrap">
                <input type="tel" name="address3" placeholder="Address Line 3"/>
              </div>
            </div>
          </div>
        </li>
        <li class="align-top">
          <div class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">兴趣爱好</div>
              <div class="item-input-wrap">
                <textarea placeholder="Bio" name="notes" class="resizable"></textarea>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="item-content">
            <div class="item-inner">
              <div class="item-title">物联设备</div>
              <div class="item-after">
                <label class="toggle toggle-init">
                  <input type="checkbox" name="ilot" value="yes" />
                  <i class="toggle-icon"></i>
                </label>
              </div>
            </div>
          </div>
        </li>
      </ul>
      `)}
    </div>
    ` : $h`
    <div class="block block-strong">请首先登录系统再修改个人资料</div>
    `}
</form>

    <!-- Buttons Here -->
    <div class="block block-strong row">
      <div class="col"><a class="button button-fill fill-form-from-data-a"  href="#">Fill Form Eva</a></div>
      <div class="col"><a class="button button-fill fill-form-from-data-c"  href="#">Fill Form Store</a></div>
      <div class="col"><a class="button button-fill fill-form-from-data-b"  href="#">Fill Form YangY</a></div>
    </div>
    <!-- END OF Buttons  -->
    <!-- <div class="block-title">Buttons</div> -->
    <div class="block block-strong">
      <!-- <p class="row">
        <a href="#" class="col button">Button</a>
        <a href="#" class="col button button-fill">Fill</a>
      </p> -->
      <p class="row">
        <a href="#" class="col button button-raised">取消</a>
        <a href="#" class="col button button-raised button-fill">保存</a>
      </p>
      <p class="row">
      </p>
    </div>

  </div>
</div>
</template>
<script>
export default (props, { $, $on, $f7, $store }) => {
    //----------------------------------------------------
    const loading = $store.getters.loading;
    const users   = $store.getters.users;
    //----------------------------------------------------
    // Component Data

    // Component Methods

    // Lifecycle

    // Page Events
    $on('pageInit', () => {
        // ------------------------------    Request Data from AJAX   -----------------------------------------
        console.log("xxxxx Pretty Girls! " + users.value.length);

        // -------------------------------------    DOM Events  -----------------------------------------
        $('.fill-form-from-data-a').on('click', function(){
          var formData = {
            'city': "上海浦东",
            'title': "白领丽人",
            'age': 4,
            'notes': "停车坐爱枫林晚，霜叶红于二月花",
          }
          $f7.form.fillFromData('#my-form', formData);
        });
        $('.fill-form-from-data-b').on('click', function(){
          var formData = {
            'city': "北京三里屯",
            'title': "美貌少妇",
            'age': 6,
            'notes': "花径不曾缘客扫，蓬门今始为君开",
          }
          $f7.form.fillFromData('#my-form', formData);
        });
        $('.fill-form-from-data-c').on('click', function(){
          console.log("xxxxx YangY OOXX! " + users.value.length + '|' + users.value[0].first_name);
          var formData = {
                'first_name': users.value[0].first_name,
                'title':    users.value[0].title,
                'email':    users.value[0].email,
                'mobile':   users.value[0].mobile,
                'gender':   users.value[0].gender_id,
                'age':      users.value[0].age_id,
                'language': users.value[0].language_id,
                'city':     users.value[0].city,
                'address1': users.value[0].address1,
                'address2': users.value[0].address2,
                'address3': users.value[0].address3,
                'notes':    users.value[0].notes,
                'ilot':     ['yes'],
          }
          $f7.form.fillFromData('#my-form', formData);
        });
        // -------------------------------------    App Events  -----------------------------------------
    });

    //----------------------------------------------------
    return $render;
};
</script>